!function(a){function b(a){Object.defineProperty(this,a,{enumerable:!0,get:function(){return this[o][a]}})}function c(a){if("undefined"!=typeof System&&System.isModule?System.isModule(a):"[object Module]"===Object.prototype.toString.call(a))return a;var b={default:a,__useDefault:a};if(a&&a.__esModule)for(var c in a)Object.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return new d(b)}function d(a){Object.defineProperty(this,o,{value:a}),Object.keys(a).forEach(b,this)}function e(a){return"@node/"===a.substr(0,6)?m(a,c(p(a.substr(6))),{}):n[a]}function f(a){var b=e(a);if(!b)throw new Error('Module "'+a+'" expected, but not contained in build.');if(b.module)return b.module;var c=b.linkRecord;return g(b,c),l(b,c,[]),b.module}function g(a,b){if(!b.depLoads){b.declare&&h(a,b),b.depLoads=[];for(var c=0;c<b.deps.length;c++){var d=e(b.deps[c]);b.depLoads.push(d),d.linkRecord&&g(d,d.linkRecord);var f=b.setters&&b.setters[c];f&&(f(d.module||d.linkRecord.moduleObj),d.importerSetters.push(f))}return a}}function h(b,c){var d=c.moduleObj,e=b.importerSetters,f=!1,g=c.declare.call(a,function(a,b){if(!f){if("object"==typeof a)for(var c in a)"__useDefault"!==c&&(d[c]=a[c]);else d[a]=b;f=!0;for(var g=0;g<e.length;g++)e[g](d);return f=!1,b}},{id:b.key});"function"!=typeof g?(c.setters=g.setters,c.execute=g.execute):(c.setters=[],c.execute=g)}function i(a,b,c){return n[a]={key:a,module:void 0,importerSetters:[],linkRecord:{deps:b,depLoads:void 0,declare:c,setters:void 0,execute:void 0,moduleObj:{}}}}function j(a,b,c,d){var e={};return n[a]={key:a,module:void 0,importerSetters:[],linkRecord:{deps:b,depLoads:void 0,declare:void 0,execute:d,executingRequire:c,moduleObj:{default:e,__useDefault:e},setters:void 0}}}function k(a,b,c){return function(d){for(var e=0;e<a.length;e++)if(a[e]===d){var f,g=b[e],h=g.linkRecord;return f=h?-1===c.indexOf(g)?l(g,h,c):h.moduleObj:g.module,"__useDefault"in f?f.__useDefault:f}}}function l(b,c,e){if(e.push(b),b.module)return b.module;if(c.setters){for(var f=0;f<c.deps.length;f++){var g=c.depLoads[f],h=g.linkRecord;h&&-1===e.indexOf(g)&&l(g,h,h.setters?e:[])}c.execute.call(q)}else{var i={id:b.key},j=c.moduleObj;Object.defineProperty(i,"exports",{configurable:!0,set:function(a){j.default=j.__useDefault=a},get:function(){return j.__useDefault}});var m=k(c.deps,c.depLoads,e);if(!c.executingRequire)for(var f=0;f<c.deps.length;f++)m(c.deps[f]);var n=c.execute.call(a,m,j.__useDefault,i);void 0!==n?j.default=j.__useDefault=n:i.exports!==j.__useDefault&&(j.default=j.__useDefault=i.exports);var o=j.__useDefault;if(o&&o.__esModule)for(var p in o)Object.hasOwnProperty.call(o,p)&&(j[p]=o[p])}var i=b.module=new d(c.moduleObj);if(!c.setters)for(var f=0;f<b.importerSetters.length;f++)b.importerSetters[f](i);return i}function m(a,b){return n[a]={key:a,module:b,importerSetters:[],linkRecord:void 0}}var n={},o="undefined"!=typeof Symbol?Symbol():"@@baseObject";d.prototype=Object.create(null),"undefined"!=typeof Symbol&&Symbol.toStringTag&&(d.prototype[Symbol.toStringTag]="Module");var p="undefined"!=typeof System&&System._nodeRequire||"undefined"!=typeof require&&void 0!==require.resolve&&"undefined"!=typeof process&&process.platform&&require,q={};return Object.freeze&&Object.freeze(q),function(a,b,e,g){return function(h){h(function(h){var k={_nodeRequire:p,register:i,registerDynamic:j,registry:{get:function(a){return n[a].module},set:m},newModule:function(a){return new d(a)}};m("@empty",new d({}));for(var l=0;l<b.length;l++)m(b[l],c(arguments[l],{}));g(k);var o=f(a[0]);if(a.length>1)for(var l=1;l<a.length;l++)f(a[l]);return e?o.__useDefault:(o instanceof d&&Object.defineProperty(o,"__esModule",{value:!0}),o)})}}}("undefined"!=typeof self?self:"undefined"!=typeof global?global:this)(["a"],[],!1,function(a){this.require,this.exports,this.module;a.registerDynamic("b",[],!0,function(){return{name:"DFP",description:"A DoubleClick for Publishers Implementation",version:"2.4.1",license:"MIT",author:{name:"Elia Grady",email:"admin@eliagrady.com"},bugs:{url:"https://github.com/haaretz/dfp/issues"},devDependencies:{"babel-cli":"^6.6.0","babel-core":"^6.6.0","babel-eslint":"^6.1.2","babel-loader":"^6.2.4","babel-plugin-external-helpers":"^6.8.0","babel-plugin-external-helpers-2":"^6.3.13","babel-plugin-syntax-jsx":"^6.5.0-1","babel-plugin-syntax-object-rest-spread":"^6.5.0-1","babel-plugin-transform-es2015-modules-commonjs":"^6.14.0","babel-plugin-transform-object-rest-spread":"^6.5.0-1","babel-plugin-transform-runtime":"^6.15.0","babel-polyfill":"^6.13.0","babel-preset-es2015":"^6.14.0","babel-preset-es2015-rollup":"^1.2.0","babel-preset-stage-0":"^6.5.0-1","babel-register":"^6.6.0","babelrc-rollup":"^3.0.0",chai:"^3.5.0","dirty-chai":"^1.2.2",eslint:"^3.2.0","eslint-config-airbnb":"^10.0.1","eslint-plugin-import":"^1.8.1",glob:"^7.0.0",isparta:"^4.0.0","isparta-instrumenter-loader":"^1.0.0","isparta-loader":"^2.0.0","json-loader":"^0.5.4",jspm:"^0.17.0-beta.31",karma:"1.2.0","karma-browserstack-launcher":"^1.0.1","karma-chrome-launcher":"^2.0.0","karma-coverage":"douglasduteil/karma-coverage#next","karma-coveralls":"^1.1.2","karma-dirty-chai":"^1.0.2","karma-firefox-launcher":"^1.0.0","karma-ie-launcher":"^1.0.0","karma-mocha":"^1.1.1","karma-mocha-reporter":"^2.0.0","karma-phantomjs-launcher":"^1.0.0","karma-sauce-launcher":"^1.0.0","karma-sinon-chai":"^1.2.0","karma-sourcemap-loader":"^0.3.7","karma-webpack":"^1.7.0",mkdirp:"^0.5.1",mocha:"^3.0.0","mocha-jsdom":"^1.1.0","mocha-lcov-reporter":"^1.2.0","mock-browser":"^0.92.10","npm-check-updates":"^2.5.8",phantomjs:"^2.1.3","phantomjs-prebuilt":"^2.1.4","pre-commit":"^1.1.2",rimraf:"^2.5.2",rollup:"^0.34.1","rollup-plugin-babel":"^2.6.1","rollup-plugin-commonjs":"^4.0.1","rollup-plugin-eslint":"^2.0.0","rollup-plugin-filesize":"^0.5.5","rollup-plugin-json":"^2.0.2","rollup-plugin-node-resolve":"^2.0.0","rollup-plugin-replace":"^1.1.0","rollup-plugin-sourcemaps":"^0.3.7","rollup-plugin-uglify":"^1.0.1",sinon:"^1.17.3","sinon-chai":"^2.8.0","uglify-js":"latest",webpack:"^2.1.0-beta.4","webpack-dev-server":"^1.14.1"},peerDependencies:{lolex:"^1.4.0"},homepage:"https://github.com/haaretz/dfp#readme","jsnext:main":"src/index.js",keywords:["boilerplate","es2015","rollup","karma","mocha","workflow","babel","es","isparta","rimraf","chai","sinon","webpack","eslint","bundle","DFP"],main:"dist/dfp.min.js",jspm:{name:"DFP",main:"dfp.js",dependencies:{json:"github:systemjs/plugin-json@^0.1.2"},devDependencies:{"plugin-babel":"npm:systemjs-plugin-babel@^0.0.17"},peerDependencies:{}},repository:{type:"git",url:"git@github.com:haaretz/dfp"},scripts:{clean:"rimraf coverage/ dist/","build:dev":"babel-node config/rollup.config.js dev","build:prod":"babel-node config/rollup.config.js prod","build:es6":"babel-node config/rollup.config.js dev es6","build:jspm:dev":"jspm build src/index.js dist/dfp.js --format global --global-name DFP --source-map-contents","build:jspm:prod":"jspm build src/index.js dist/dfp.min.js --format global --global-name DFP --minify --source-map-contents","build:jspm:es6":"jspm build src/index.js dist/dfp.es6.js --format esm --source-map-contents",build:"npm run build:jspm","build:rollup":"npm run clean && mkdirp dist && npm run build:dev && npm run build:prod && npm run build:es6","build:jspm":"npm run clean && mkdirp dist && npm run build:jspm:dev && npm run build:jspm:prod && npm run build:jspm:es6",browser:"webpack-dev-server --quiet --config config/webpack.dev.conf.js --host 0.0.0.0","test:server":"mocha --opts config/mocha.opts","test:browser":"karma start config/karma.conf.js --no-auto-watch","karma:phantom":"karma start config/karma.conf.js --single-run --no-auto-watch --browsers=PhantomJS","karma:chrome":"karma start config/karma.conf.js --single-run --no-auto-watch --browsers=Chrome","karma:firefox":"karma start config/karma.conf.js --single-run --no-auto-watch --browsers=Firefox","karma:ie":"karma start config/karma.conf.js --single-run --no-auto-watch --browsers=IE",test:"npm run test:browser",lint:"eslint ./src/**/*.js","lint:tests":"eslint ./src/**/*__tests__*/**/*.js","lint:source":"eslint src/","watch:server":"npm run test:server -- --watch","watch:browser":"./node_modules/.bin/karma start config/karma.conf.js --auto-watch --no-single-run",packages:"npm list --depth=0","package:purge":"rm -rf node_modules","package:reinstall":"npm run package:purge && npm install","package:check":"./node_modules/.bin/ncu","package:upgrade":"./node_modules/.bin/ncu -u","package:prod":"./node_modules/.bin/ncu -u","package:dev":"./node_modules/.bin/ncu -p -u",preversion:"[[ -z $(git status --porcelain) ]] && npm run build:jspm && git add -A dist && git commit -m 'Build lib'",postpublish:"git push origin master --follow-tags",commit:"git-cz"},"pre-commit":["test","lint:source"],engines:{node:"<6",npm:"~2.5"},dependencies:{"babel-runtime":"^6.11.6"}}}),a.register("a",["b"],function(a,b){"use strict";function c(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=b.separator,d=void 0===c?";":c,e=b.operator,f=void 0===e?"=":e,g={};return a.split(d).forEach(function(a){if("string"==typeof a){var b=a.split(f);if(2===b.length)try{g[b[0]]=decodeURIComponent(b[1])}catch(a){}}}),g}function d(){var a=c(document.cookie,{separator:/;\s?/});return"string"==typeof a.tmsso&&(a.tmsso=c(a.tmsso,{separator:":"})),"string"==typeof a.engsso&&(a.engsso=c(a.engsso,{separator:":"})),a}function e(a,b){if(!a)throw new SyntaxError("addHours called without a required 'date' parameter!");if(!b)throw new SyntaxError("addHours called without a required 'hours' parameter!");if(isNaN(parseInt(b,10)))throw new TypeError("addHours called with an invalid integer 'hours' parameter!");var c=new Date(a);return c.setHours(c.getHours()+parseInt(b,10)),c}function f(a,b){if(!a)throw new SyntaxError("addDays called without a required 'date' parameter!");if(!b)throw new SyntaxError("addDays called without a required 'days' parameter!");if(isNaN(parseInt(b,10)))throw new TypeError("addDays called with an invalid integer 'days' parameter!");var c=new Date(a);return c.setDate(c.getDate()+parseInt(b,10)),c}function g(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,c=arguments[2],d=void 0;return function(){var e=this,f=arguments,g=function(){d=null,c||a.apply(e,f)},h=c&&!d;clearTimeout(d),d=setTimeout(g,b),h&&a.apply(e,f)}}function h(){var a=void 0,b=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;switch(!0){case b<r.xs:a=r.xxs;break;case b<r.s:a=r.xs;break;case b<r.m:a=r.s;break;case b<r.l:a=r.m;break;case b<r.xl:a=r.l;break;case b<r.xxl:a=r.xl;break;default:a=r.xxl}return a}function i(a){var b=void 0,c=a||window.innerWidth;switch(!0){case c<r.xs:b="xxs";break;case c<r.s:b="xs";break;case c<r.m:b="s";break;case c<r.l:b="m";break;case c<r.xl:b="l";break;case c<r.xxl:b="xl";break;default:b="xxl"}return b}function j(a,b){if(!a||!b)return!1;if(!Array.isArray(a)||!Array.isArray(b))return!1;if(a===b)return!0;if(a.length!==b.length)return!1;for(var c=0;c<a.length;++c)if(Array.isArray(a[c])&&Array.isArray(b[c])){if(!j(a[c],b[c]))return!1}else if(a[c]!==b[c])return!1;return!0}var k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J;return{setters:[function(a){k=a.version}],execute:function(){l=function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")},m=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),n=function(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)},o=window.location.hostname.indexOf("haaretz.com")>-1?"engsso":"tmsso",p=void 0;try{p=window.JSON.parse(document.getElementById("dfpConfig").textContent)}catch(a){p=window.dfpConfig}q=Object.assign({get referrer(){return document.referrer?document.referrer:""},get isMobile(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(window.navigator.userAgent||"")},get isHomepage(){return"/"===window.location.pathname||3===this.environment},get department(){return this.isHomepage?"_homepage":"_section"},get domain(){var a=/([\d|\w]+)(\.co\.il|\.com)(.*)?/.exec(window.location.hostname);return a?a[0]:window.location.hostname},get path(){var a=this.articleId&&"0"!==this.articleId?window.location.pathname.split("/").slice(1,-1):window.location.pathname.split("/").slice(1);return a=a.filter(function(a){return"wwwMobileSite"!==a&&"whtzMobileSite"!==a}),a.map(function(a){return"."+a}).map(function(a,b,c){return c.slice(0,b+1).reduce(function(a,b){return a.concat(b)})})},get site(){var a=void 0;return window.location.hostname.indexOf("haaretz.co.il")>-1?a="haaretz":window.location.hostname.indexOf("themarker.com")>-1?a="themarker":window.location.hostname.indexOf("mouse.co.il")>-1&&(a="mouse"),a||"haaretz"},get environment(){var a={dev:1,test:2,prod:3};return"8080"===window.location.port?a.dev:window.location.hostname.indexOf("pre.haaretz.co.il")>-1||window.location.hostname.indexOf("tmtest.themarker.com")>-1||window.location.hostname.indexOf("pre.haaretz.com")>-1||window.location.hostname.indexOf("prodmouse.mouse.co.il")>-1?a.test:window.location.pathname.indexOf("/cmlink/Haaretz.HomePage")>-1||window.location.pathname.indexOf("/cmlink/TheMarker.HomePage")>-1||window.location.pathname.indexOf("/cmlink/Mouse.HomePage")>-1?a.prod:void 0},get articleId(){var a=/\d\.\d+/g.exec(window.location.pathname),b="0";return a&&(b=a.pop()),b},utm_:{get content(){return this.getUrlParam("utm_content")},get source(){return this.getUrlParam("utm_source")},get medium(){return this.getUrlParam("utm_medium")},get campaign(){return this.getUrlParam("utm_campaign")},getUrlParam:function(a){var b=RegExp("("+a+')(=)([^&"]+)').exec(window.location.search);return b&&b[3]?b[3]:void 0}},get adBlockRemoved(){var a=!1;try{localStorage.getItem("adblock_removed")&&(a=!0)}catch(a){}return a},get ssoGroupKey(){return window.localStorage.getItem("_ssoGroupKey")},get anonymousId(){var a="anonymousId",b=d(),c="";return b&&b[a]&&(c=b[a]),c},get isWriterAlerts(){return location.search.indexOf("writerAlerts=true")>-1},get wifiLocation(){var a=void 0,b="_htzwif",c=d();try{c&&c[b]&&("arcaffe"===c[b].toLowerCase()&&(a="ArCafe"),"university"===c[b].toLowerCase()&&(a="university"))}catch(a){}return a},get isValidForsmartPhone(){var a=!0,b=window.location.href,c=b.match("haaretzsmartphoneapp"),e=d();try{c&&(e&&(e.NotPayer||e.HtzPusr)||(a=!1))}catch(a){}return a},get gStatCampaignNumber(){var a=void 0;try{a=localStorage.getItem("GstatCampaign")?JSON.parse(localStorage.getItem("GstatCampaign")):void 0}catch(b){a=void 0}return a?a.CampaignNumber:void 0},get proposalNumber(){var a=void 0;try{a=localStorage.getItem("proposaltype")?localStorage.getItem("proposaltype"):void 0}catch(b){a=void 0}return a},adSlotConfig:{"haaretz.co.il.example.slot":{id:"slotId",responsive:!0,adSizeMapping:[["width1","height1"]].concat(["widthN","heightN"]),priority:"normal",fluid:!1,responsiveAdSizeMapping:{xxs:[["width1","height1"]].concat(["widthN","heightN"]),xs:[["width1","height1"]].concat(["widthN","heightN"]),s:[["width1","height1"]].concat(["widthN","heightN"]),m:[["width1","height1"]].concat(["widthN","heightN"]),l:[["width1","height1"]].concat(["widthN","heightN"]),xl:[["width1","height1"]].concat(["widthN","heightN"]),xxl:[["width1","height1"]].concat(["widthN","heightN"])},blacklistReferrers:"comma, delimited, blacklisted, referrer, list",whitelistReferrers:"comma, delimited, referrer, list"}},adManagerConfig:{network:"9401",adUnitBase:"haaretz.co.il_Web"},breakpointsConfig:{get breakpoints(){var a=void 0;switch(q.googleGlobalSettings.breakpointType){case"type1":a=this.breakpoints1;break;case"type2":a=this.breakpoints2;break;case"type3":a=this.breakpoints3;break;case"type4":a=this.breakpoints4;break;default:a=this.breakpoints1}return a},breakpoints1:{xxs:600,xs:761,s:993,m:1009,l:1291,xl:1600,xxl:1900},breakpoints2:{xxs:600,xs:1e3,s:1150,m:1281,l:1600,xl:1920,xxl:1920},breakpoints3:{xxs:100,xs:480,s:600,m:768,l:1024,xl:1280,xxl:1900},breakpoints4:{xxs:600,xs:768,s:1024,m:1280,l:1900,xl:1900,xxl:1900}},userConfig:{type:void 0,age:void 0,gender:void 0},conflictManagementConfig:{"blocking.ad.unit.name":[{onsize:"1280x200,970x250,3x3",avoid:"blocked.ad.unit.name"},{onsize:"1280x200,970x250,3x3",avoid:"blocked.ad.unit.name"}]},impressionManagerConfig:{"ad.unit.name":{target:"all|section|homepage",frequency:"$1/$2(day|hour)",exposed:0,expires:(new Date).getTime()}},googleGlobalSettings:{enableSingleRequest:!0,enableAsyncRendering:!0,refreshIntervalTime:1e3,breakpointType:"type1"},sso:o},p),r=q.breakpointsConfig.breakpoints,s={impressions:"impressions",frequency:"frequency",frequencyRegex:/(\d+)\/(\d+)(day|hour)/,expires:"expires",exposed:"exposed",target:"target",maxImpressions:"maxImpressions",hours:"hour",days:"day",adSlotId:"id"},t=function(){function a(b){l(this,a),this.now=(new Date).getTime(),this.config=Object.assign({},b),this.impressions=this.retrieveImpressionsData(),this.initImpressionMap()}return m(a,[{key:"retrieveImpressionsData",value:function(){var a=this,b=this.migrateImpressionsData();Object.keys(b).map(function(c,d){return b[c]=Object.assign({},b[c],a.config[c]),a});for(var c in b)({}).hasOwnProperty.call(b,c)&&(b[c][s.frequency]||delete b[c]);return b}},{key:"migrateImpressionsData",value:function(){var a=this,b=void 0,c=void 0;try{c=window.localStorage.getItem(s.impressions)}catch(a){c=void 0}try{b=JSON.parse(c)}catch(e){b={};var d=c.split(";").filter(function(a){return a});d.forEach(function(c){try{var d=c.split(" = "),e=d[0],f=d[1],g=e.split("."),h=g.pop();h&&"hp"===h&&(h="homepage");var i=g.join("."),j=i+"_"+h,k=parseInt(f.split("/")[0],10)||0,l=parseInt(f.split("/")[1],10)||a.now;b[j]={},b[j][s.adSlotId]=i,b[j][s.target]=h,b[j][s.exposed]=k,b[j][s.expires]=l}catch(a){}})}return b||{}}},{key:"saveImpressionsToLocalStorage",value:function(){this.debouncedSave&&"function"==typeof this.debouncedSave?this.debouncedSave():(this.debouncedSave=g(this.saveImpressionsToLocalStorageImpl,250,!1),this.debouncedSave())}},{key:"saveImpressionsToLocalStorageImpl",value:function(){try{localStorage.setItem(s.impressions,JSON.stringify(this.impressions))}catch(a){console.error("localStorage isn't available:",a)}}},{key:"initImpressionMap",value:function(){var a=this;Object.keys(this.config).map(function(b,c){var d=b,e=a.impressions[d],f=!1;return e?a.config[d][s.frequency]!==e[s.frequency]?(f=!0,a.impressions[d][s.frequency]=a.config[d][s.frequency]):a.now>e[s.expires]&&(f=!0):a.initSlotFromConfig(d),f&&a.updateExpiryDate(d),a})}},{key:"updateExpiryDate",value:function(a){var b=new Date;if(!this.impressions[a]||!this.impressions[a][s.frequency])throw new Error("Unable to update expiry date for slot: "+a+"\n      - this.impressions[slotName]:",this.impressions[a]);var c=this.impressions[a][s.frequency].match(s.frequencyRegex);b.setMilliseconds(0),b.setSeconds(0),b.setMinutes(0),c.indexOf(s.days)>-1&&b.setHours(0),this.impressions[a][s.expires]=(c.indexOf(s.days)>-1?f(b,c[2]):e(b,c[2])).getTime(),this.impressions[a][s.maxImpressions]=parseInt(c[1],10),this.impressions[a][s.exposed]=0}},{key:"initSlotFromConfig",value:function(a){var b=this.impressions[a]||{};b[s.frequency]=this.config[a][s.frequency],b[s.target]=this.config[a][s.target],b[s.exposed]=0,this.impressions[a]=b,this.updateExpiryDate(a)}},{key:"registerImpression",value:function(a){if(a){var b=this.impressions[a];if(b){var c=b[s.exposed];if(!1===isNaN(parseInt(c,10))){this.impressions[a][s.exposed]+=1;try{this.saveImpressionsToLocalStorage()}catch(a){}return!0}}}return!1}},{key:"reachedQuota",value:function(a){var b=this.impressions[""+a+q.department]?""+a+q.department:a+"_all",c=this.impressions[b],d=!1;if(c){var e=(new Date).getTime();if(this.impressions[b][s.expires]<e)this.updateExpiryDate(b);else{var f=this.impressions[b][s.maxImpressions];f&&(d=this.impressions[b][s.exposed]>=f)}}return d}},{key:"resetImpressions",value:function(){var a=this.impressions;for(var b in a)({}).hasOwnProperty.call(a,b)&&a[b][s.exposed]&&(a[b][s.exposed]=0);this.saveImpressionsToLocalStorage()}}]),a}(),u={payer:"payer",registered:"registered",anonymous:"anonymous",trial:"trial"},v={htz:243,tm:273,hdc:239,htz_tm:274},w=function(){function a(b){l(this,a),this.config=Object.assign({},b.userConfig);var c=d();this.ssoKey=q.sso,c[this.ssoKey]||(this.ssoKey="tmsso"===this.ssoKey?"engsso":"tmsso"),this.type=this.getUserType(c),this.htz_type=this.getUserTypeByProduct(c,v.htz),this.tm_type=this.getUserTypeByProduct(c,v.tm),this.hdc_type=this.getUserTypeByProduct(c,v.hdc),this.impressionManager=new t(b.impressionManagerConfig),this.age=this.getUserAge(c),this.gender=this.getUserGender(c),this.sso=this.getUserSSO(c,this.ssoKey)}return m(a,[{key:"getUserType",value:function(a){var b=void 0;if(a&&a[this.ssoKey]){b=a[window.location.hostname.indexOf("haaretz.com")>-1?"HdcPusr":"HtzPusr"]?u.payer:u.registered}else b=u.anonymous;return b}},{key:"getUserTypeByProduct",value:function(a,b){var c=u.anonymous;if(a&&a[this.ssoKey]&&a.userProducts){var d=decodeURIComponent(a.userProducts);d=JSON.parse(d),c=b===v.hdc?this.getHdcUserType(d):this.getHtzTmUserType(d,b)}return c}},{key:"getHdcUserType",value:function(a){return this.userHasProduct(a,v.hdc,!1)?u.payer:this.userHasProduct(a,v.hdc,!0)?u.trial:u.registered}},{key:"getHtzTmUserType",value:function(a,b){return this.userHasProduct(a,b,!1)||this.userHasProduct(a,v.htz_tm,!1)?u.payer:this.userHasProduct(a,b,!0)||this.userHasProduct(a,v.htz_tm,!0)?u.trial:u.registered}},{key:"userHasProduct",value:function(a,b,c){return a.products.filter(function(a){return a.prodNum===b&&a.trial===c}).length>0}},{key:"getUserAge",value:function(a){var b=void 0;return a[this.ssoKey]&&a[this.ssoKey].usrae&&(b=parseInt(a[this.ssoKey].usrae,10),b=b>0?b:void 0),b}},{key:"getUserGender",value:function(a){var b=void 0;return a[this.ssoKey]&&a[this.ssoKey].urgdr&&(b=parseInt(a[this.ssoKey].urgdr,10),b=2===b||1===b?b:void 0),b}},{key:"getUserSSO",value:function(a,b){return a[b]}}]),a}(),x=function(){function a(b){l(this,a),this.dependencyMap=this.initializeDependencyMap(b),this.deferredSlots=new Set}return m(a,[{key:"initializeDependencyMap",value:function(a){var b=this,c=new Map;return Object.keys(a).map(function(d,e){var f=a[d];return f&&(f=f.filter(function(a){return a.onsize&&a.avoid})),c.set(d,{id:d,rules:f,resolvedWith:null}),b}),c}},{key:"updateResolvedSlot",value:function(a,b){if(!a)throw new Error("updateResolvedSlot must be called with an adSlotId!");if(!b)throw new Error("updateResolvedSlot must be called with a resolved size!");this.dependencyMap.has(a)&&(this.dependencyMap.get(a).resolvedWith=b)}},{key:"isBlocked",value:function(a){var b=this;if(!a)throw new Error("isBlocked must be called with an adSlotId!");var c=!1,d=!0,e=!1,f=void 0;try{for(var g,h=this.dependencyMap.keys()[Symbol.iterator]();!(d=(g=h.next()).done);d=!0){var i=g.value,j=this.dependencyMap.get(i),k=!0,l=!1,m=void 0;try{for(var n,o=j.rules[Symbol.iterator]();!(k=(n=o.next()).done);k=!0){var p=n.value;p.avoid===a&&function(){var d=j.resolvedWith;d||(c=!0,b.deferredSlots.add(a)),p.onsize.split(",").find(function(a){var c=a.split("x").map(function(a){return parseInt(a,10)});return b.arraysEqual(c,d)})&&(b.deferredSlots.add(a),c=!0)}()}}catch(a){l=!0,m=a}finally{try{!k&&o.return&&o.return()}finally{if(l)throw m}}}}catch(a){e=!0,f=a}finally{try{!d&&h.return&&h.return()}finally{if(e)throw f}}return c}},{key:"isBlocking",value:function(a){if(!a)throw new Error("isBlocking must be called with an adSlotId!");var b=!1,c=!0,d=!1,e=void 0;try{for(var f,g=this.dependencyMap.keys()[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){f.value===a&&(b=!0)}}catch(a){d=!0,e=a}finally{try{!c&&g.return&&g.return()}finally{if(d)throw e}}return b}},{key:"getBlockedSlotsIds",value:function(a){var b=void 0;return this.dependencyMap.has(a)&&(b=Array.from(this.dependencyMap.get(a).rules.map(function(a){return a.avoid}))),b||[]}},{key:"arraysEqual",value:function(a,b){if(a===b)return!0;if(null===a||null===b)return!1;if(a.length!==b.length)return!1;for(var c=0;c<a.length;++c)if(a[c]!==b[c])return!1;return!0}}]),a}(),x.EMPTY_SIZE=[],y=q.site.indexOf("mouse")>-1?"u-is-hidden":"h-hidden",z=function(){function a(b){if(l(this,a),this.config=Object.assign({},b),this.id=this.config.id,!this.config.id)throw new Error("an adSlot requires an id!");this.target=this.config.target,this.type=this.config.type,this.responsive=this.config.responsive,this.fluid=this.config.fluid,this.user=this.config.user,this.adManager=this.config.adManager,this.htmlElement=this.config.htmlElement,this.priority=this.config.priority,this.deferredSlot=this.config.deferredSlot,this.department=this.config.department,this.network=this.config.network,this.adUnitBase=this.config.adUnitBase,this.adSizeMapping=this.config.adSizeMapping,this.responsiveAdSizeMapping=this.config.responsiveAdSizeMapping,this.blacklistReferrers=this.config.blacklistReferrers?this.config.blacklistReferrers.split(","):[],this.whitelistReferrers=this.config.whitelistReferrers?this.config.whitelistReferrers.split(","):[],this.lastResolvedSize=void 0,this.lastResolvedWithBreakpoint=void 0,this.slot=void 0;try{this.deferredSlot||(this.slot=this.defineSlot())}catch(a){console.error(a)}}return m(a,[{key:"isOutOfPage",value:function(){if("string"!=typeof this.type)throw new Error("An adSlot cannot by typeless!",this);if(!0===this.isMobile())return!1;switch(this.type){case D.maavaron:return!1;case D.popunder:return!0;case D.talkback:case D.regular:default:return!1}}},{key:"isMaavaron",value:function(){if("string"!=typeof this.type)throw new Error("An adSlot cannot by typeless!",this);if(!0===this.isMobile())return!1;switch(this.type){case D.maavaron:default:return!1}}},{key:"isMobile",value:function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(window.navigator.userAgent||"")}},{key:"isWhitelisted",value:function(){var a=!1;if(0!==this.whitelistReferrers.length){var b=!0,c=!1,d=void 0;try{for(var e,f=this.whitelistReferrers[Symbol.iterator]();!(b=(e=f.next()).done);b=!0){var g=e.value;if(q.referrer.indexOf(g)>-1){a=!0;break}}}catch(a){c=!0,d=a}finally{try{!b&&f.return&&f.return()}finally{if(c)throw d}}}else a=!0;return a}},{key:"isBlacklisted",value:function(){var a=!1;if(0!==this.blacklistReferrers.length){var b=!0,c=!1,d=void 0;try{for(var e,f=this.blacklistReferrers[Symbol.iterator]();!(b=(e=f.next()).done);b=!0){var g=e.value;if(q.referrer.indexOf(g)>-1){a=!0;break}}}catch(a){c=!0,d=a}finally{try{!b&&f.return&&f.return()}finally{if(c)throw d}}}return a}},{key:"show",value:function(){var a=this;!0==!this.shown&&(this.shown=!0,googletag.cmd.push(function(){a.deferredSlot&&(a.slot=a.defineSlot()),document.getElementById(a.id).classList.remove(y),googletag.display(a.id)}))}},{key:"hide",value:function(){var a=this;googletag.cmd.push(function(){document.getElementById(a.id).classList.add(y)})}},{key:"defineSlot",value:function(){if(this.isMaavaron()){var a=this.defineMaavaron();return this.adManager.shouldSendRequestToDfp(this)&&(this.shown||(this.shown=!0,a.display())),a}var b=window.googletag,c=b.pubads(),d=[],e=this.isOutOfPage()?b.defineOutOfPageSlot:b.defineSlot;d.push(this.getPath()),!1===this.isOutOfPage()&&(this.fluid?d.push("fluid"):d.push(this.adSizeMapping)),d.push(this.id);var f=e.apply(e,d);if(f){if(this.responsive){var g=b.sizeMapping(),h=q.breakpointsConfig.breakpoints,i=Object.keys(this.responsiveAdSizeMapping),k=!0,l=!1,m=void 0;try{for(var n,o=i[Symbol.iterator]();!(k=(n=o.next()).done);k=!0){var p=n.value;g.addSize([h[p],100],j(this.responsiveAdSizeMapping[p],[[0,0]])?[]:this.responsiveAdSizeMapping[p])}}catch(a){l=!0,m=a}finally{try{!k&&o.return&&o.return()}finally{if(l)throw m}}g=g.build(),f=f.defineSizeMapping(g)}f=f.addService(c),!1===this.isOutOfPage()&&f.setCollapseEmptyDiv(!0)}return f}},{key:"getPath",value:function(){var a=this,b=q.path||[];return b=b.filter(function(a){return"."!==a}),b=b.map(function(b){return""+a.id+a.department+b}).join("/"),b=b&&"_homepage"!==this.config.department?"/"+b:"",("/"+this.config.network+"/"+this.config.adUnitBase+"/"+this.id+"/"+this.id+this.department+b).toLowerCase()}},{key:"slotRendered",value:function(a){a.slot.getAdUnitPath().split("/")[3],a.isEmpty,a.size}},{key:"refresh",value:function(){var a=this;googletag.cmd.push(function(){googletag.pubads().refresh([a.slot])})}},{key:"defineMaavaron",value:function(){if(!document.referrer.match("loc.haaretz")){var a=this.getPath(),b=[[2,1]];return googletag.pubads().definePassback(a,b).setTargeting("UserType",[this.user.type]).setTargeting("age",[this.user.age]).setTargeting("urgdr",[this.user.gender]).setTargeting("articleId",[q.articleId]).setTargeting("stg",[q.environment])}return null}}]),a}(),A={high:"high",normal:"normal",low:"low"},B={all:"all",nonPaying:"nonPaying",anonymous:"anonymous",registered:"registered",paying:"paying",digitalOnly:"digitalOnly",digitalAndPrint:"digitalAndPrint"},C={anonymous:"anonymous",registered:"registered",payer:"payer"},D={maavaron:".maavaron",popunder:".popunder",talkback:".talkback",regular:""},E=function(){function a(b){var c=this;l(this,a),this.config=Object.assign({},b),this.user=new w(b),this.conflictResolver=new x(b.conflictManagementConfig);try{googletag.cmd.push(function(){c.initGoogleTargetingParams(),c.initGoogleGlobalSettings(),c.initSlotRenderedCallback()});var d=i(h());this.config.adManagerConfig.adUnitBase.indexOf("mouse.co.il")>-1&&d.indexOf("xs")>-1&&(this.config.adManagerConfig.adUnitBase="mouse.co.il.mobile_web"),googletag.cmd.push(function(){c.adSlots=c.initAdSlots(b.adSlotConfig,A.high)});var e=function(){try{googletag.cmd.push(function(){c.adSlots=c.initAdSlots(b.adSlotConfig,A.high),googletag.cmd.push(function(){c.adSlots=c.initAdSlots(b.adSlotConfig,A.normal)})})}catch(a){console.log(a)}},f=function(){googletag.cmd.push(function(){c.adSlots=c.initAdSlots(b.adSlotConfig,A.low);var a=!0,d=!1,e=void 0;try{for(var f,g=c.conflictResolver.dependencyMap.keys()[Symbol.iterator]();!(a=(f=g.next()).done);a=!0){var h=f.value;c.adSlots.has(h)||c.conflictResolver.dependencyMap.delete(h)}}catch(a){d=!0,e=a}finally{try{!a&&g.return&&g.return()}finally{if(d)throw e}}c.showAllDeferredSlots()})};switch(document.readyState){case"loading":document.addEventListener("DOMContentLoaded",e),window.addEventListener("load",f);break;case"interactive":e(),window.addEventListener("load",f);break;default:e(),f()}}catch(a){console.error(a)}}return m(a,[{key:"showAllSlots",value:function(){var a=!0,b=!1,c=void 0;try{for(var d,e=this.adSlots.keys()[Symbol.iterator]();!(a=(d=e.next()).done);a=!0){var f=d.value,g=this.adSlots.get(f);g.type!==D.talkback&&this.shouldSendRequestToDfp(g)&&g.show()}}catch(a){b=!0,c=a}finally{try{!a&&e.return&&e.return()}finally{if(b)throw c}}}},{key:"getAdSlotsByPriority",value:function(a){function b(b){return b.priority===a}return Array.from(this.adSlots.values()).filter(b)}},{key:"showAllDeferredSlots",value:function(){var a=!0,b=!1,c=void 0;try{for(var d,e=this.conflictResolver.deferredSlots[Symbol.iterator]();!(a=(d=e.next()).done);a=!0){var f=d.value;if(this.adSlots.has(f)&&!this.conflictResolver.isBlocked(f)){var g=this.adSlots.get(f);this.shouldSendRequestToDfp(g)&&g.show()}}}catch(a){b=!0,c=a}finally{try{!a&&e.return&&e.return()}finally{if(b)throw c}}}},{key:"refreshAllSlots",value:function(){var a=h(),b=!0,c=!1,d=void 0;try{for(var e,f=this.adSlots.keys()[Symbol.iterator]();!(b=(e=f.next()).done);b=!0){var g=e.value,i=this.adSlots.get(g);i.responsive&&i.type!==D.maavaron&&(i.lastResolvedWithBreakpoint!==a&&this.shouldSendRequestToDfp(i)?i.refresh():i.hide())}}catch(a){c=!0,d=a}finally{try{!b&&f.return&&f.return()}finally{if(c)throw d}}}},{key:"refreshAllSlotsInPage",value:function(){var a=!0,b=!1,c=void 0;try{for(var d,e=this.adSlots.keys()[Symbol.iterator]();!(a=(d=e.next()).done);a=!0){var f=d.value,g=this.adSlots.get(f);this.shouldSendRequestToDfp(g)?g.refresh():g.hide()}}catch(a){b=!0,c=a}finally{try{!a&&e.return&&e.return()}finally{if(b)throw c}}}},{key:"refreshSlot",value:function(a){var b=this.adSlots.get(a);this.shouldSendRequestToDfp(b)?b.refresh():b.hide()}},{key:"initAdSlots",value:function(a,b){var c=this,d=new Map(this.adSlots),e=Array.from(document.getElementsByClassName("js-dfp-ad"));e=e.filter(function(a){return a.id});var f=new Set;return e=Array.prototype.filter.call(e,function(a){return!1===f.has(a.id)&&(f.add(a.id),!0)}),e.forEach(function(e){var f=a[e.id]?a[e.id].priority||A.normal:void 0;if(a[e.id]&&!1===d.has(e.id)&&f===b)try{var g=Object.assign({},a[e.id],{id:e.id,target:e.attributes["data-audtarget"]?e.attributes["data-audtarget"].value:B.all,type:c.getAdType(e.id),responsive:a[e.id].responsive,fluid:a[e.id].fluid||!1,user:c.user,adManager:c,htmlElement:e,department:c.config.department,network:c.config.adManagerConfig.network,adUnitBase:c.config.adManagerConfig.adUnitBase,deferredSlot:c.conflictResolver.isBlocked(e.id),priority:f}),h=new z(g);d.set(e.id,h),h.type!==D.talkback&&h.priority===A.high&&c.shouldSendRequestToDfp(h)&&h.show()}catch(a){console.error(a)}}),d}},{key:"isPriority",value:function(a){return"string"==typeof a&&(a.indexOf("plazma")>0||a.indexOf("maavaron")>0||a.indexOf("popunder")>0)}},{key:"getAdType",value:function(a){if(!a)throw new Error("Missing argument: a call to getAdType must have an adSlotId");return a.indexOf(D.maavaron)>-1?D.maavaron:a.indexOf(D.popunder)>-1?D.popunder:a.indexOf(D.talkback)>-1?D.talkback:D.regular}},{key:"shouldSendRequestToDfp",value:function(a){return!1===this.conflictResolver.isBlocked(a.id)&&a.isWhitelisted()&&!1===a.isBlacklisted()&&this.shouldDisplayAdAfterAdBlockRemoval(a)&&this.shouldDisplayAdMaavaronAfterPayWallBanner(a)&&this.doesBreakpointContainAd(a)&&this.haveValidCookieForSmartphoneapp()&&this.doesUserTypeMatchBannerTargeting(a)&&!1===this.user.impressionManager.reachedQuota(a.id)}},{key:"shouldDisplayAdAfterAdBlockRemoval",value:function(a){return!(!0===this.config.adBlockRemoved&&(a.type===D.maavaron||a.type===D.popunder))}},{key:"shouldDisplayAdMaavaronAfterPayWallBanner",value:function(a){var b=!0;if("haaretz"===this.config.site&&a.type===D.maavaron)try{var c=JSON.parse(window.localStorage.getItem("_cobj"));b=!c||c.mc&&c.mc>=12||c.nextslotLocation&&!c.nextslotLocation.includes("pop")}catch(a){console.error("ERROR ON shouldDisplayAdMaavaronAfterPayWallBanner")}return b}},{key:"haveValidCookieForSmartphoneapp",value:function(){return this.config.isValidForsmartPhone}},{key:"doesUserTypeMatchBannerTargeting",value:function(a){var b=this.user.type;switch("string"==typeof a?a:a.target){case B.all:return!0;case B.nonPaying:return b===C.anonymous||b===C.registered;case B.anonymous:return b===C.anonymous;case B.registered:return b===C.registered;case B.paying:case B.digitalOnly:case B.digitalAndPrint:return b===C.payer;default:return!1}}},{key:"switchedToBreakpoint",value:function(a){if(!a)throw new Error("Missing argument: a call to switchedToBreakpoint must have an breakpoint");var b=0,c=!0,d=!1,e=void 0;try{for(var f,g=this.adSlots.keys()[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){var h=f.value,i=this.adSlots.get(h);!0===i.responsive&&i.lastResolvedWithBreakpoint&&i.lastResolvedWithBreakpoint!==a&&(i.refresh(),b++)}}catch(a){d=!0,e=a}finally{try{!c&&g.return&&g.return()}finally{if(d)throw e}}return b}},{key:"doesBreakpointContainAd",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h();if(!a)throw new Error("Missing argument: a call to doesBreakpointContainAd must have an adSlot");var c=!0;if(!0===a.responsive){var d=a.responsiveAdSizeMapping[i(b)];if(!1===Array.isArray(d))throw new Error("Invalid argument: breakpoint:"+b+" doesn't exist!",this);c=d.length>0&&!j(d,[[0,0]])}return c}},{key:"initSlotRenderedCallback",value:function(){var a=this;if(!window.googletag||!window.googletag.apiReady)throw new Error("googletag api was not ready when 'initSlotRenderedCallback' was called!");window.googletag.pubads().addEventListener("slotRenderEnded",function(b){var c=b.slot.getAdUnitPath().split("/")[3],d=b.isEmpty,e=b.size;if(a.adSlots.has(c)){var f=a.adSlots.get(c);f.lastResolvedSize=e,f.lastResolvedWithBreakpoint=h(),d?(f.lastResolvedSize=x.EMPTY_SIZE,f.hide(),a.releaseSlotDependencies(f)):a.releaseSlotDependencies(f,f.lastResolvedSize),a.user.impressionManager.registerImpression(""+f.id+a.config.department),a.user.impressionManager.registerImpression(f.id+"_all")}})}},{key:"releaseSlotDependencies",value:function(a){try{var b=a.id;if(this.conflictResolver.updateResolvedSlot(b,a.lastResolvedSize),this.conflictResolver.isBlocking(b)){var c=!0,d=!1,e=void 0;try{for(var f,g=this.conflictResolver.getBlockedSlotsIds(b)[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){var h=f.value;this.conflictResolver.isBlocked(h)&&this.adSlots.has(h)&&this.adSlots.get(h).hide()}}catch(a){d=!0,e=a}finally{try{!c&&g.return&&g.return()}finally{if(d)throw e}}var i=!0,j=!1,k=void 0;try{for(var l,m=this.conflictResolver.deferredSlots.keys()[Symbol.iterator]();!(i=(l=m.next()).done);i=!0){var n=l.value,o=this.adSlots.get(n);o&&this.shouldSendRequestToDfp(o)&&(this.conflictResolver.deferredSlots.delete(n),o.deferredSlot&&(o.defineSlot(),o.deferredSlot=!1),o.show())}}catch(a){j=!0,k=a}finally{try{!i&&m.return&&m.return()}finally{if(j)throw k}}}}catch(b){console.error("Cannot updateSlotDependencies for adSlot: "+a.id)}}},{key:"initGoogleTargetingParams",value:function(){if(!window.googletag||!window.googletag.apiReady)throw new Error("googletag api was not ready when 'initGoogleTargetingParams' was called!");var a=googletag.pubads();if(this.config.environment&&a.setTargeting("stg",[this.config.environment]),this.user.type&&a.setTargeting("UserType",[this.user.type]),this.user.htz_type&&a.setTargeting("htz_user_type",[this.user.htz_type]),this.user.tm_type&&a.setTargeting("tm_user_type",[this.user.tm_type]),this.user.hdc_type&&a.setTargeting("hdc_user_type",[this.user.hdc_type]),this.user.age&&a.setTargeting("age",[this.user.age]),this.user.gender&&a.setTargeting("urgdr",[this.user.gender]),this.config.articleId&&a.setTargeting("articleId",[this.config.articleId]),this.config.gStatCampaignNumber&&-1!==this.config.gStatCampaignNumber&&a.setTargeting("gstat_campaign_id",[this.config.gStatCampaignNumber]),this.config.proposalNumber&&a.setTargeting("proposaltype",[this.config.proposalNumber]),this.config.isWriterAlerts&&a.setTargeting("WriterAlerts",["true"]),this.config.utm_.content&&a.setTargeting("utm_content",[this.config.utm_.content]),this.config.utm_.source&&a.setTargeting("utm_source",[this.config.utm_.source]),this.config.utm_.medium&&a.setTargeting("utm_medium",[this.config.utm_.medium]),this.config.utm_.campaign&&a.setTargeting("utm_campaign",[this.config.utm_.campaign]),this.config.adBlockRemoved&&a.setTargeting("adblock_removed",[this.config.adBlockRemoved]),this.config.wifiLocation&&a.setTargeting("wifi",[this.config.wifiLocation]),this.config.tags&&Array.isArray(this.config.tags)&&a.setTargeting("tags",[].concat(n(this.config.tags))),this.user.sso&&this.config.ssoGroupKey&&a.setTargeting(this.config.ssoGroupKey,this.user.sso),this.config.anonymousId){a.setTargeting("anonymousIdKey",this.config.anonymousId)}a.setCentering(!0)}},{key:"initGoogleGlobalSettings",value:function(){if(!window.googletag||!window.googletag.apiReady)throw new Error("googletag api wasn't ready when 'initGoogleGlobalSettings' was called!");var a=this.config.googleGlobalSettings;if(window.location.search){var b=window.location.search;b.indexOf("sraon")>0?(console.log("Single Request Mode: active"),a.enableSingleRequest=!0):b.indexOf("sraoff")>0&&(console.log("Single Request Mode: disabled"),a.enableSingleRequest=!1),b.indexOf("asyncrenderingon")>0?(console.log("Async rendering mode: active"),a.enableAsyncRendering=!0):b.indexOf("asyncrenderingonoff")>0&&(console.log("Sync rendering mode: active"),a.enableAsyncRendering=!1)}!0===a.enableSingleRequest&&googletag.pubads().enableSingleRequest(),!0===a.enableAsyncRendering?googletag.pubads().enableAsyncRendering():googletag.pubads().enableSyncRendering(),googletag.enableServices()}}]),a}(),F=q||{},G=250,H=function(){function a(b){l(this,a),this.config=Object.assign({},F,b),this.wasInitialized=!1,this.initStarted=!1,this.breakpoint=h(),this.initWindowResizeListener()}return m(a,[{key:"resumeInit",value:function(){try{this.adManager=this.adManager||new E(this.config)}catch(a){console.error(a)}}},{key:"initGoogleTag",value:function(){var a=this,b=this;return new Promise(function(c,d){!0===b.initStarted?googletag.cmd.push(function(){b.wasInitialized=!0,c(b)}):(b.initStarted=!0,window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[],function(){var e=window.document.createElement("script");e.async=!0,e.type="text/javascript",e.setAttribute("src","//www.googletagservices.com/tag/js/gpt.js");var f=window.document.getElementsByTagName("script")[0];e.addEventListener("load",function(){b.resumeInit(),googletag.cmd.push(function(){b.wasInitialized=!0,c(a)})}),e.addEventListener("error",function(a){b.wasInitialized=!1,d(a)}),f.parentNode.insertBefore(e,f)}())})}},{key:"isGoogleTagReady",value:function(){return(!0===this.wasInitialized||window.googletag&&window.googletag.apiReady)&&(this.wasInitialized=!0),this.wasInitialized}},{key:"initWindowResizeListener",value:function(){function a(){var a=h();if(b.breakpoint!==a){if(b.breakpoint=a,!b.adManager)throw new Error("initWindowResizeListener error - adManager instance is not available");b.adManager.refreshAllSlots()}}var b=this,c=g(a,G);window.onresize=c}}]),a}(),H.version=k||"VERSION",a("config",I=q),a("version",J=H.version),a("default",H),a("config",I),a("version",J)}}})})(function(a){DFP=a()});
//# sourceMappingURL=dfp.min.js.map